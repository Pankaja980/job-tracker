<!-- 
<div *ngFor="let job of jobApplications">
    <app-job-item [job]="job"></app-job-item>  ✅ Using JobItemComponent -->
  <!-- </div> -->
  <!-- <h2>Job Applications</h2>

  <!-- <button (click)="addNewJob()">Add New Job</button> -->
  
  <!-- Ensure the form is being used -->
  <!-- <div *ngIf="selectedJob">
    <app-job-form [job]="selectedJob" (save)="saveJob($event)"></app-job-form>
  </div>
  
  <ul>
    <li *ngFor="let job of jobApplications">
      <app-job-item [job]="job"></app-job-item> <!-- ✅ Pass job data -->
      <!-- <button (click)="editJob(job)">Edit</button>
    </li>
  </ul> --> 
 
  <p-toast></p-toast>

  <h2>Job Applications</h2>

  <app-job-category-selector [(selectedCategory)]="selectedStatus"></app-job-category-selector>

<div class="p-mb-4">
  <button pButton type="button" label="Add Job" icon="pi pi-plus" class="p-button-success" (click)="openAddJobDialog()">Add Job</button>
</div>

<p-table [value]="(filteredJobs$ |async ) ?? []"  responsiveLayout="scroll">
  <ng-template pTemplate="header">
    <tr>
      <th pSortableColumn="title">Title <p-sortIcon field="title"></p-sortIcon></th>

      <th pSortableColumn="company">Company <p-sortIcon field="company"></p-sortIcon></th>
      
      <th>Status</th>

      <th>Actions</th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-job>
    <tr>
      <td *ngIf="job?.title">{{ job.title }}</td>
      <td *ngIf="job?.company">{{ job.company }}</td>

      <td *ngIf="job?.category">{{ job.status }}</td>
      <td>
        <button pButton type="button" label="Edit" icon="pi pi-pencil"  (click)="openEditJobDialog(job)">Edit</button>
        <button pButton type="button" label="Delete" icon="pi pi-trash" (click)="deleteJob(job)">Delete</button>
      </td>
    </tr>
  </ng-template>
</p-table>

<p-dialog [(visible)]="displayAddDialog" header="Add Job" [modal]="true">
  <!-- <div class="p-fluid">
    <div class="p-field" *ngIf="selectedJob">
      <label for="title">Job Title</label>
      <input id="title" type="text"  pInputText  [(ngModel)]="selectedJob.title" />
    </div>
    <div class="p-field" *ngIf="selectedJob">
      <label for="company">Company</label>
      <input id="company" type="text" pInputText [(ngModel)]="selectedJob!.company" />
    </div>
    <div class="p-field" *ngIf="selectedJob">
      <label for="status">Status</label>
      <p-dropdown id="status" [(ngModel)]="selectedJob!.status" [options]="['Applied', 'Interview Scheduled', 'Rejected', 'Offer Received']"></p-dropdown>
    </div>
  </div>
  <p-footer>
    <button pButton type="button" label="Save" icon="pi pi-check" (click)="saveJob()"></button>
    <button pButton type="button" label="Cancel" icon="pi pi-times" (click)="displayDialog = false"></button>
  </p-footer> -->
  <app-job-form *ngIf="newJob()" 
  [job]="newJob()" 
  (save)="saveJob($event)" 
  (close)="closeDialog()"></app-job-form>
</p-dialog>

<p-dialog [(visible)]="displayEditDialog" header="Edit Job" [modal]="true">
  <app-job-form *ngIf="selectedJob()" [job]="selectedJob()" (save)="saveJob($event)" (close)="closeDialog()"></app-job-form>
</p-dialog>
<p-chart type="pie" [data]="chartData" [options]="chartOptions" ></p-chart>

  